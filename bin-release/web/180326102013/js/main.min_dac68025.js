var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},__assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r["throw"](e))}catch(t){o(t)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(r){n=[6,r],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Cookie;!function(e){function t(e,t,n){return s(e,t,n)}function n(e,t){return c(e,t)}function r(e,t){return u(e,t)}var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(Error);e.CookieError=i,__reflect(i.prototype,"Cookie.CookieError");var o=864e5,a=function(e){if(!("undefined"!=typeof document||e&&e.silent))throw new i("Document is not defined! Are you trying to use this on the server?");return"undefined"!=typeof document},s=function(e,t,n){if(a(n)){var r=new Date,i=n&&n.days?"; expires="+r.setTime(r.getTime()+n.days*o):"",s=n&&n.secure?"; secure":"",c=n&&n.path?"; path="+n.path:"",u=n&&n.domain?"; domain="+n.domain:"";return document.cookie=encodeURIComponent(e)+"="+t+i+s+c+u,!0}return!1},c=function(e,t){if(a(t)){var n=document.cookie.match("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)");return n?decodeURI(n[1]):""}return""},u=function(e,t){return s(e,"",__assign({},t,{days:-1}))};e.setcooke=t,e.getcooke=n,e.removecookie=r}(Cookie||(Cookie={}));var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.stage.addChild(GameLayerManager.gameLayer()),this.loadLayer=GameLayerManager.instance.loadLayer,this.loadingView=new LoadingUI,this.loadLayer.addChild(this.loadingView),this.loadBar=new LoadBar,Loader.getInstance(),Loader.instance.addEventListener(LoadEvent.GROUP_COMPLETE,this.loadGroupComp,this),Loader.instance.addEventListener(LoadEvent.GROUP_PROGRESS,this.loadGroupprogress,this),Loader.instance.init()},t.prototype.loadGroupprogress=function(e){"loading"==e.groupName?this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal):"preload"==e.groupName&&this.loadBar.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.loadGroupComp=function(e){if("loading"==e.groupName){this.loadLayer.removeChild(this.loadingView);var t=Util.createBitmapByName("bg_jpg");GameLayerManager.instance.sceneLayer.addChild(t),this.loadBar.init(),this.loadLayer.addChild(this.loadBar),Loader.instance.load("preload")}else"preload"==e.groupName&&this.createScence()},t.prototype.createScence=function(){this.loadLayer.removeChild(this.loadBar);var e=new game.GameContainer;GameLayerManager.instance.sceneLayer.addChild(e)},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var Config=function(){function e(){}return e.VERSION="0.1.2",e.API_HOST="http://yingxiaogame.daqinwang.cc",e.GAME_ID="10",e.API_SUBMIT_SCORE=e.API_HOST+"/wechat/game/submit_user_info/"+e.GAME_ID,e.API_TOPLIST=e.API_HOST+"/wechat/game/ranking/"+e.GAME_ID,e.API_LOTTERY=e.API_HOST+"/wechat/game/lottery/"+e.GAME_ID,e}();__reflect(Config.prototype,"Config");var Store=function(){function e(){}return e.setOrientation=function(t){(90==t||-90==t)&&(e.orientation="landscope")},Object.defineProperty(e,"stageHeight",{get:function(){return egret.MainContext.instance.stage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stageWidth",{get:function(){return egret.MainContext.instance.stage.stageWidth},enumerable:!0,configurable:!0}),e.orientation="portrait",e.score=0,e.time=0,e}();__reflect(Store.prototype,"Store");var LoadEvent=function(e){function t(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),e.call(this,t,n,r)||this}return __extends(t,e),t}(RES.ResourceEvent);__reflect(LoadEvent.prototype,"LoadEvent");var MainEvent=function(e){function t(t,n){void 0===n&&(n=1);var r=e.call(this,t)||this;return r._step=1,r._step=n,r}return __extends(t,e),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},enumerable:!0,configurable:!0}),t.START="start",t.RESTART="restart",t.OVER="over",t.SHARE="share",t.LOADCOMP="loadcomp",t.STEP="step",t}(egret.Event);__reflect(MainEvent.prototype,"MainEvent");var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.stageW=Store.stageWidth,this.stageH=Store.stageHeight,GameLayerManager.gameLayer(),this.mainLayer=GameLayerManager.instance.mainLayer;var t=this;egret.setTimeout(function(){var e=new Jssdk;t.addChild(e)},this,20)},t}(egret.DisplayObjectContainer);e.GameContainer=t,__reflect(t.prototype,"game.GameContainer")}(game||(game={}));var Jssdk=function(e){function t(){var t=e.call(this)||this;return t.CLASS_NAME="Jssdk",t.myScore=Store.score,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.init()},t.prototype.init=function(){this.title=this.title?this.title:"国网陕西电力新年登高",this.desc=this.desc?this.desc:"国网陕西电力新年登高",this.link=this.link?this.link:"http://yingxiaogame.daqinwang.cc/wechat/game/index/10",this.imgUrl=this.imgUrl?this.imgUrl:"http://img1.gtimg.com/xian/pics/hv1/254/162/2261/147063089.jpg",this.url="http://yingxiaogame.daqinwang.cc/wechat/jsconfig?url="+encodeURIComponent(location.href.split("#")[0]),this.getSignPackage()},t.prototype.getSignPackage=function(){var e=this,t="callback",n=this;this.loader=new egret.URLLoader;var r=new egret.URLRequest(this.url+"&"+t+"=");this.loader._request=r,this.JsonpReq=new JsonpReq,this.JsonpReq.process(this.loader),this.loader.addEventListener(egret.Event.COMPLETE,function(t){e.signPackage=t.target.data,wx&&(e.getWeiXinConfig(),wx.ready(function(){n.getWeiXinShareTimeline(),n.getWeiXinShareAppMessage(),n.getWeiXinShareQQ(),n.getWeiXinShareWeiBo(),n.dispatchEvent(new SoundEvent(SoundEvent.WXCOMP))}))},this)},t.prototype.getWeiXinConfig=function(){var e=new BodyConfig;e.debug=!1,e.appId=this.signPackage.appId,e.timestamp=this.signPackage.timestamp,e.nonceStr=this.signPackage.nonceStr,e.signature=this.signPackage.signature,e.jsApiList=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"],wx.config(e)},t.prototype.getWeiXinShareTimeline=function(){var e=new BodyMenuShareTimeline;e.title=this.title,e.link=this.link,e.imgUrl=this.imgUrl,e.trigger=function(){},e.success=function(){},e.cancel=function(){},e.fail=function(e){alert(JSON.stringify(e))},wx.onMenuShareTimeline(e)},t.prototype.getWeiXinShareAppMessage=function(){var e=new BodyMenuShareAppMessage;e.title=this.title,e.desc=this.desc,e.link=this.link,e.imgUrl=this.imgUrl,e.trigger=function(){},e.success=function(){},e.cancel=function(){},e.fail=function(e){},wx.onMenuShareAppMessage(e)},t.prototype.getWeiXinShareQQ=function(){var e=new BodyMenuShareQQ;e.title=this.title,e.desc=this.desc,e.link=this.link,e.imgUrl=this.imgUrl,e.trigger=function(){},e.complete=function(e){},e.success=function(){},e.cancel=function(){},e.fail=function(e){},wx.onMenuShareQQ(e)},t.prototype.getWeiXinShareWeiBo=function(){var e=new BodyMenuShareWeibo;e.title=this.title,e.desc=this.desc,e.link=this.link,e.imgUrl=this.imgUrl,e.trigger=function(){},e.complete=function(e){},e.success=function(){},e.cancel=function(){},e.fail=function(e){alert(JSON.stringify(e))},wx.onMenuShareWeibo(e)},t.prototype.getWeixinShowMenuItems=function(e){void 0===e&&(e=null);var t=["menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:favorite","menuItem:share:facebook","menuItem:share:QZone","menuItem:editTag","menuItem:delete","menuItem:copyUrl","menuItem:originPage","menuItem:readMode","menuItem:openWithQQBrowser","menuItem:openWithSafari","menuItem:share:email","menuItem:share:brand"];null!=e&&(t=e),wx.showMenuItems({menuList:t,success:function(e){},fail:function(e){}})},t.prototype.getWeixinHideMenuItems=function(e){void 0===e&&(e=null);var t=["menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:favorite","menuItem:share:facebook","menuItem:share:QZone","menuItem:editTag","menuItem:delete","menuItem:copyUrl","menuItem:originPage","menuItem:readMode","menuItem:openWithQQBrowser","menuItem:openWithSafari","menuItem:share:email","menuItem:share:brand"];null!=e&&(t=e),wx.hideMenuItems({menuList:t,success:function(e){},fail:function(e){alert(JSON.stringify(e))}})},t}(egret.DisplayObjectContainer);__reflect(Jssdk.prototype,"Jssdk");var LoadBar=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){this.prol=new egret.Sprite,this.prol.x=228,this.prol.y=223,this.addChild(this.prol),this.bm=Util.createBitmapByName("loadbar_bg_png"),this.bm.y=246,this.prol.addChild(this.bm),this.barl=Util.createBitmapByName("loadbar_top_png"),this.barl.y=246,this.prol.addChild(this.barl);var e=new egret.TextField;e.text="Loading",e.textColor=16777215,e.size=30,e.y=354,e.width=285,e.textAlign=egret.HorizontalAlign.CENTER,this.prol.addChild(e);var t=4;egret.setInterval(function(){for(var n="",r=4-t,i=r;i>0;i--)n+=".";e.text="Loading"+n,t-=1,0>t&&(t=3)},this,200)},t.prototype.setProgress=function(e,t){this.barl.width=e/t*285},t}(egret.DisplayObjectContainer);__reflect(LoadBar.prototype,"LoadBar");var Loader=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){if(null==t.instance){var e=new t;t.instance=e}return t.instance},t.prototype.init=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json?v="+Config.VERSION,"resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("loading")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){this.loadevent=new LoadEvent(LoadEvent.GROUP_PROGRESS),this.loadevent.groupName=e.groupName,this.loadevent.itemsLoaded=e.itemsLoaded,this.loadevent.itemsTotal=e.itemsTotal,this.dispatchEvent(this.loadevent),this.loadevent=null},t.prototype.onResourceLoadComplete=function(e){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadevent=new LoadEvent(LoadEvent.GROUP_COMPLETE),this.loadevent.groupName=e.groupName,this.dispatchEvent(this.loadevent),this.loadevent=null},t.prototype.load=function(e){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(e)},t}(egret.EventDispatcher);__reflect(Loader.prototype,"Loader");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=egret.MainContext.instance.stage.stageWidth,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var Effect=function(){function e(){}return e.macIconShake=function(e,t,n,r,i){void 0===n&&(n=!1),void 0===r&&(r=[]),void 0===i&&(i=0);var o=[[20,300],[15,300],[10,300],[5,300]];r.length&&(o=r);for(var a="egret.Tween.get("+e+", {loop: "+n+"}).wait("+i+")",s=0,c=o.length;c>s;s++)a+=".to({'anchorOffsetY':"+t+"-"+o[s][0]+"}, "+o[s][1]+")",a+=".to({'anchorOffsetY':"+t+"}, "+o[s][1]+")";return a+=";"},e.startFlicker=function(e,t){e.alpha=1,egret.Tween.get(e).to({alpha:0},t).to({alpha:1},t).call(this.startFlicker,this,[e])},e.stopFlicker=function(e){egret.Tween.removeTweens(e)},e.fadeIn=function(e,t,n,r){void 0===n&&(n=0);var i=egret.Tween.get(e).to({alpha:0}).wait(n).to({alpha:1},t,egret.Ease.sineIn);r&&i.call(r)},e.fadeOut=function(e,t,n,r){void 0===n&&(n=0);var i=egret.Tween.get(e).wait(n).to({alpha:0},t,egret.Ease.circOut);r&&i.call(r)},e.zoomInBig=function(e,t,n){var r=egret.Tween.get(e).to({scaleX:1,scaleY:1},t,egret.Ease.backOut);n&&r.call(n)},e.blinkEffect=function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=500),void 0===r&&(r=100),egret.Tween.get(e,{loop:!0}).to({alpha:t},n,egret.Ease.sineOut).to({alpha:1},n,egret.Ease.sineIn).wait(r)},e}();__reflect(Effect.prototype,"Effect");var GameLayerManager=function(e){function t(){var t=e.call(this)||this;return t.sceneLayer=new egret.Sprite,t.mainLayer=new egret.Sprite,t.panelLayer=new egret.Sprite,t.effectLayer=new egret.Sprite,t.maskLayer=new egret.Sprite,t.loadLayer=new egret.Sprite,t.init(),t}return __extends(t,e),t.gameLayer=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.init=function(){this.addChild(this.sceneLayer),this.addChild(this.mainLayer),this.addChild(this.panelLayer),this.addChild(this.effectLayer),this.addChild(this.maskLayer),this.addChild(this.loadLayer)},t.prototype.clearLayer=function(e){for(;e.numChildren>0;)e.removeChildAt(0)},t}(egret.Sprite);__reflect(GameLayerManager.prototype,"GameLayerManager");var HitTest=function(){function e(){}return e.hitTestRect=function(e,t){var n=e.getBounds(),r=t.getBounds();return n.x=e.x,n.y=e.y,r.x=t.x,r.y=t.y,n.intersects(r)},e.hitTestLayer=function(e,t){return Math.abs(e.x+e.width/2-(t.x+t.width/2))<=Math.abs((e.width+t.width)/2)&&Math.abs(e.y+e.height/2-(t.y+t.height/2))<=Math.abs((e.height+t.height)/2)},e.hitTestPoint=function(e){return!1},e}();__reflect(HitTest.prototype,"HitTest");var HttpBase=function(){function e(){return this.request=new egret.HttpRequest,this.request.responseType=egret.HttpResponseType.TEXT,this.request.setRequestHeader("X-XSRF-TOKEN",Cookie.getcooke("XSRF-TOKEN")||""),this}return e.prototype.post=function(e,t,n){void 0===t&&(t={}),this.request.open(this.getUrl(e),egret.HttpMethod.POST),this.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.request.send(this.formatPostData(t)),this.request.addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget;n(JSON.parse(t.response))},this),this.request.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){alert("网络错误，请稍后重试!")},this)},e.prototype.get=function(e,t,n){void 0===t&&(t={});var r=this.formatPostData(t),i=this.getUrl(e);""!=r&&(i+="?"+r),this.request.open(i,egret.HttpMethod.GET),this.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.request.send(),this.request.addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget;n(JSON.parse(t.response))},this),this.request.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){alert("网络错误，请稍后重试!")},this)},e.prototype.getUrl=function(t){if("string"==typeof e.domain&&e.domain.length>0)return"http://"+e.domain;if("function"==typeof e.domain){var n=e.domain();return n&&""!==n?"http://"+n+t:t}return t},e.setDomain=function(t){"string"==typeof t||"function"==typeof t?e.domain=t:console.log("setDomain 的参数 domain 必须是一个字符串或者函数")},e.prototype.formatPostData=function(e){var t=[],n="";for(var r in e)if("object"==typeof e[r]){try{n=JSON.stringify(e[r])}catch(i){console.log("Http.formatPostData 参数异常: ",e),n=""}t.push(r+"="+n)}else t.push(r+"="+e[r]);return t.length<=0?"":t.join("&")},e.domain=null,e}();__reflect(HttpBase.prototype,"HttpBase");var JsonpReq=function(){function e(){}return e.prototype.process=function(t){e.completeCall["call_"+e._regID]=function(n){var r=e._regID;t.data=n,t.dispatchEvent(new egret.Event(egret.Event.COMPLETE)),delete e.completeCall["call_"+r]},e.startLoader(t,e._regID++)},e.startLoader=function(e,t){var n=document.createElement("script");n.src=e._request.url+"JsonpReq.completeCall.call_"+t,document.body.appendChild(n)},e._regID=0,e.completeCall={},e}();__reflect(JsonpReq.prototype,"JsonpReq");var MCFactory=function(){function e(){}return e.createMovieClip=function(e){if(!this.factory[e]){var t=RES.getRes(e+"_json");if(!t)return void console.log("没有该 key 的资源帧动画, data 为空, key: "+e);var n=RES.getRes(e+"_png");if(!n)return void console.log("没有该 key 的资源帧动画, txtr 为空, key: "+e);var r=new egret.MovieClipDataFactory(t,n);this.factory[e]=r}return new egret.MovieClip(this.factory[e].generateMovieClipData(e))},e.factory={},e}();__reflect(MCFactory.prototype,"MCFactory");var xtools;!function(e){var t;!function(e){var t=function(){function e(){}return e.checkIfCanJump=function(e,t){for(var n=!1,r=0;r<e.narrowphase.contactEquations.length;r++){var i=e.narrowphase.contactEquations[r];if(i.bodyA===t||i.bodyB===t){var o=p2.vec2.dot(i.normalA,this.yAxis);i.bodyA===t&&(o*=-1),console.log("checkIfCanJump:",o),-.5>o&&(n=!0)}}return n},e.syncDisplay=function(t,n){if(void 0===n&&(n=""),t){var r=t.displays[0];if(r){var i=e.getEgretLoc(t,n);r.x=i[0],r.y=i[1],r.rotation=360-180*t.angle/Math.PI,n.length&&console.log(n+"的锚点",r.anchorOffsetX,r.anchorOffsetY)}}},e.extentEgret=function(e){return e*this.$factor},e.extentP2=function(e){return e/this.$factor},e.getP2Pos=function(e,t){return[e/this.$factor,t/this.$factor]},e.getEgretLoc=function(e,t){void 0===t&&(t="");var n=e.position[0],r=e.position[1];return t.length&&console.log("["+t+"]getEgretLoc:",n,r,"(p2->egret)",n*this.$factor,r*this.$factor),[n*this.$factor,r*this.$factor]},e.initSpace=function(e,t){this.$factor=e,this._rectWorld=t},e.yAxis=p2.vec2.fromValues(0,1),e}();e.P2Space=t,__reflect(t.prototype,"xtools.phys.P2Space")}(t=e.phys||(e.phys={}))}(xtools||(xtools={}));var PanelEffect;!function(e){function t(e,t,n,r,i,o){if(void 0===t&&(t=!1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=!1),!GameLayerManager.gameLayer().panelLayer.contains(e)){e.scaleX=1,e.scaleY=1,e.x=0,e.y=0,e.alpha=1,t&&(this.darkSprite=new egret.Sprite,this.darkSprite.graphics.clear(),this.darkSprite.graphics.beginFill(2953227,.8),this.darkSprite.graphics.drawRect(0,0,Store.stageWidth,Store.stageHeight),this.darkSprite.graphics.endFill(),this.darkSprite.width=Store.stageWidth,this.darkSprite.height=Store.stageHeight,GameLayerManager.gameLayer().panelLayer.contains(this.darkSprite)||GameLayerManager.gameLayer().panelLayer.addChild(this.darkSprite),this.darkSprite.touchEnabled=!0,egret.Tween.get(this.darkSprite).to({alpha:1},150),this.darkSprite.visible=!0),GameLayerManager.gameLayer().panelLayer.addChild(e),Store.curPanel=e,0!=n?(e.x=Store.stageWidth/2-n/2,e.y=Store.stageHeight/2-r/2):(n=e.width,r=e.height);var a=Store.stageWidth/2-n/2,s=Store.stageHeight/2-r/2;switch(i){case 0:break;case 1:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+n/4,e.y=e.y+r/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-n/4,y:e.y-r/4},300,egret.Ease.backOut);break;case 2:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+n/4,e.y=e.y+r/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-n/4,y:e.y-r/4},600,egret.Ease.elasticOut);break;case 3:o?(e.x=-n,egret.Tween.get(e).to({x:a},500,egret.Ease.cubicOut)):(e.x=-n,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 4:o?(e.x=n,egret.Tween.get(e).to({x:a},500,egret.Ease.cubicOut)):(e.x=n,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 5:o?(e.y=-r,egret.Tween.get(e).to({y:s},500,egret.Ease.cubicOut)):(e.y=-r,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut));break;case 6:o?(e.y=Store.stageHeight,egret.Tween.get(e).to({y:s},500,egret.Ease.cubicOut)):(e.y=r,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut))}}}function n(e,t){void 0===t&&(t=0);var n=function(){GameLayerManager.gameLayer().panelLayer.contains(this.darkSprite)&&GameLayerManager.gameLayer().panelLayer.removeChild(this.darkSprite)};switch(this.darkSprite&&egret.Tween.get(this.darkSprite).to({alpha:0},100).call(n,this),t){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var r=500;0==t&&(r=0),egret.setTimeout(function(){GameLayerManager.gameLayer().panelLayer.contains(e)&&GameLayerManager.gameLayer().panelLayer.removeChild(e)},this,r)}e.addPopUp=t,e.removePopUp=n}(PanelEffect||(PanelEffect={}));var Music;!function(e){function t(t){e._bgSound=RES.getRes(t),e._bgChannel=e._bgSound.play(0,-1)}function n(){e._bgChannel&&(e._bgChannel.stop(),e._bgChannel=null)}function r(e){var t=RES.getRes(e);t.play(0,1)}e.play=t,e.stop=n,e.playEffect=r}(Music||(Music={}));var Util=function(){function e(){}return e.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},e.sortarr=function(e){for(var t,n=0;n<e.length;n++)for(var r=e.length-1;r>n;r--)e[r].y<e[r-1].y&&(t=e[r],e[r]=e[r-1],e[r-1]=t);return e},e.center=function(e){return(Store.stageWidth-e.width)/2},e}();__reflect(Util.prototype,"Util");